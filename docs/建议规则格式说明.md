# 建议规则JSON格式说明

## 文件位置

建议规则保存在项目根目录的 `advice_rules.json` 文件中。

## JSON结构

```json
{
  "Rules": [
    {
      "Id": 1,
      "Condition": {
        "HealthThreshold": 30.0,
        "Phase": null,
        "HeroCombination": null,
        "EquipmentCombination": null,
        "MapRegion": null,
        "SkillConditions": null,
        "CustomConditions": null
      },
      "AdviceContent": "血量较低，建议撤退或使用恢复道具",
      "Priority": 8,
      "Type": 4,
      "IsEnabled": true
    }
  ],
  "NextId": 4
}
```

## 字段说明

### AdviceRule（规则对象）

- **Id** (int): 规则唯一标识符，自动递增
- **Condition** (AdviceCondition): 匹配条件对象
- **AdviceContent** (string): 建议内容文本
- **Priority** (int): 优先级，数字越大优先级越高
- **Type** (int): 建议类型枚举值
  - 0: Combat（战斗建议）
  - 1: Strategy（策略建议）
  - 2: Equipment（装备建议）
  - 3: Positioning（站位建议）
  - 4: Warning（警告提示）
- **IsEnabled** (bool): 是否启用该规则

### AdviceCondition（条件对象）

- **HealthThreshold** (double?): 血量阈值，低于此值时触发
- **Phase** (int?): 游戏阶段
  - 0: Unknown（未知）
  - 1: Early（前期）
  - 2: Mid（中期）
  - 3: Late（后期）
- **HeroCombination** (string[]): 英雄组合列表（英雄ID数组）
- **EquipmentCombination** (string[]): 装备组合列表（装备ID数组）
- **MapRegion** (string): 地图位置区域
- **SkillConditions** (Dictionary<string, bool>): 技能状态条件（技能ID -> 是否可用）
- **CustomConditions** (Dictionary<string, object>): 自定义条件（键值对）

### AdviceDatabaseData（根对象）

- **Rules** (AdviceRule[]): 规则列表
- **NextId** (int): 下一个可用的规则ID

## 示例规则

### 示例1：低血量警告

```json
{
  "Id": 1,
  "Condition": {
    "HealthThreshold": 30.0
  },
  "AdviceContent": "血量较低，建议撤退或使用恢复道具",
  "Priority": 8,
  "Type": 4,
  "IsEnabled": true
}
```

### 示例2：游戏前期策略

```json
{
  "Id": 2,
  "Condition": {
    "Phase": 1
  },
  "AdviceContent": "游戏前期，建议优先发育和积累资源",
  "Priority": 5,
  "Type": 1,
  "IsEnabled": true
}
```

### 示例3：特定英雄组合建议

```json
{
  "Id": 3,
  "Condition": {
    "HeroCombination": ["hero_001", "hero_002"]
  },
  "AdviceContent": "当前英雄组合适合团战，建议寻找开团机会",
  "Priority": 6,
  "Type": 1,
  "IsEnabled": true
}
```

## 编辑建议

1. **手动编辑**：可以直接编辑JSON文件添加或修改规则
2. **程序管理**：通过程序界面管理规则（待实现）
3. **备份**：修改前建议备份原文件
4. **格式**：确保JSON格式正确，否则程序会自动恢复默认数据

## 注意事项

- ID会自动分配，手动编辑时请确保ID唯一
- 修改后程序会自动重新加载规则
- 如果JSON格式错误，程序会恢复为默认示例数据
