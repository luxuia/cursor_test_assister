# 游戏辅助工具

基于图像识别的实时游戏辅助工具，使用C# + WPF开发。

## 功能特性

- 🎮 **实时画面采集**：支持游戏窗口实时截图
- 🔍 **图像识别**：识别英雄阵容、小地图、装备、血量等信息
- 🧠 **智能建议**：基于识别结果和规则数据库生成游戏建议
- 🪟 **浮窗显示**：置顶浮窗实时显示建议，不遮挡游戏操作
- ⚙️ **可配置**：支持自定义识别区域和参数配置

## 技术栈

- **.NET 8.0** - 开发框架
- **WPF** - UI框架
- **OpenCvSharp4** - 图像处理
- **SQLite** - 建议规则数据库
- **Win32 API** - 窗口捕获

## 项目结构

```
GameAssistant/
├── Core/                    # 核心接口和模型
│   ├── Interfaces/         # 接口定义
│   └── Models/             # 数据模型
├── Services/               # 服务实现
│   ├── ScreenCapture/      # 画面采集服务
│   ├── ImageRecognition/   # 图像识别服务
│   ├── Database/           # 数据库服务
│   ├── DecisionEngine/     # 决策引擎
│   └── Configuration/      # 配置服务
├── Views/                  # WPF视图
│   ├── MainWindow.xaml     # 主窗口
│   ├── OverlayWindow.xaml  # 浮窗
│   └── RegionSelectorWindow.xaml  # 区域选择器
└── ViewModels/             # 视图模型

```

## 使用说明

### 1. 配置游戏窗口

1. 启动程序后，在"配置"标签页输入游戏窗口标题或进程名称
2. 点击"查找窗口"按钮找到游戏窗口
3. 程序会自动保存窗口配置

### 2. 配置识别区域

1. 在"配置"标签页点击相应的区域选择按钮
2. 全屏窗口会显示，拖拽鼠标选择识别区域
3. 按Enter确认，按ESC取消
4. 配置会自动保存

### 3. 开始识别

1. 点击"开始识别"按钮
2. 浮窗会显示实时建议
3. 可以在主窗口查看识别状态和性能信息

## 开发说明

### 识别模块扩展

要添加新的识别功能，需要：

1. 在`IImageRecognizer`接口中添加新方法
2. 在`ImageRecognizer`类中实现该方法
3. 在`RecognitionRegions`中添加对应的区域配置
4. 在`GameState`中添加识别结果字段

### 建议规则添加

建议规则存储在SQLite数据库中，可以通过以下方式添加：

1. 使用`IAdviceDatabase.AddRuleAsync()`方法
2. 直接编辑数据库文件
3. 在设置界面管理规则（待实现）

### 性能优化

- 识别频率可通过`RecognitionParameters.RecognitionInterval`配置
- 使用`BitmapPool`减少GC压力
- 模板匹配结果会缓存，减少重复计算

## 依赖项

- OpenCvSharp4 (4.10.0.20240103)
- Microsoft.Data.Sqlite (8.0.0)
- System.Data.SQLite.Core (1.0.118)
- Newtonsoft.Json (13.0.3)

## 注意事项

1. 首次运行需要配置识别区域
2. 不同游戏需要不同的识别模板
3. 识别准确率取决于模板质量和区域配置
4. 建议规则需要根据实际游戏情况调整


## 开发状态

### ✅ 已完成
- 基础架构和接口设计
- 画面采集模块
- 配置系统（JSON）
- 建议规则数据库（JSON）
- 决策分析引擎框架
- WPF UI框架

### ⏳ 进行中
- 图像识别具体实现
- 模板匹配系统完善

### 📋 待开发
详见 [后续开发计划](docs/后续开发计划.md)

## 模板采集

### 使用模板采集工具

1. **打开工具**
   - 点击主窗口的"模板采集"按钮
   - 或使用菜单：工具 -> 模板采集

2. **捕获画面**
   - 点击"捕获游戏画面"从当前屏幕截图
   - 或点击"加载图片文件"从本地图片提取

3. **选择区域**
   - 在图片上拖拽鼠标选择要提取的区域
   - 右侧预览窗口显示裁剪后的模板

4. **保存模板**
   - 输入模板名称和分类
   - 点击"保存模板"按钮

详细指南请参考：[模板采集指南](docs/模板采集指南.md)

## TODO

### 已完成 ✅
- [x] 完善血量识别算法
- [x] 实现模板匹配系统
- [x] 创建模板采集工具
- [x] 实现英雄阵容识别
- [x] 实现小地图识别
- [x] 建议规则管理UI
- [x] 识别调试工具

### 待实现
- [ ] 集成OCR库
- [ ] UI美化
- [ ] 机器学习集成
- [ ] 云端分析
- [ ] 多游戏支持

## 许可证

MIT License
